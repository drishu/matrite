<div class="container-fluid">
  <div class="row">
    <div class="col-lg-2">
      <!-- Filtre -->
      <div id="card-filter" class="card bg-dark">
        <div class="card-body">
           <form method="get">
            <h6 class="text-white">Filtreaza dupa</h6>
            <div class="form-group">
              <input type="text" class="form-control" id="denumire_reper" name="denumire_reper" placeholder="Produs" value="<?= $this->paramsGET['denumire_reper']?>">
            </div>
            <div class="form-group">
              <input type="text" class="form-control" id="cod_matrita" name="cod_matrita" placeholder="Cod produs" value="<?= $this->paramsGET['cod_matrita']?>">
            </div>
            <div class="form-group">
              <label for="material" class="text-white">Material:</label>
              <select class="form-control" id="material" name="material" multiple>
        			  <?php foreach ($this->materials as $key => $material):?>
                  <?php $sel = ($this->paramsGET['material'] == $material['id']) ? 'selected' : ''; ?>
        				<option <?= $sel?> value="<?= $material['id']?>"><?= $material['name']?></option>
        				<?php endforeach?>
              </select>
            </div>
            <div class="form-group">
              <label for="orderby" class="text-white">Ordoneaza dupa</label>
              <select class="form-control" id="orderby" name="orderby">
                <?php foreach ($this->orderby as $key => $value):?>
                  <?php $sel = ($this->paramsGET['orderby'] == $key) ? 'selected' : ''; ?>
                  <option <?= $sel?> value="<?= $key?>"><?= $value?></option>
                <?php endforeach?>
              </select>
            </div>
            <div class="form-group">
              <select class="form-control" id="sort" name="sort">
                <?php foreach ($this->sort as $key => $value):?>
                  <?php $sel = ($this->paramsGET['sort'] == $key) ? 'selected' : ''; ?>
                  <option <?= $sel?> value="<?= $key?>"><?= $value?></option>
                <?php endforeach?>
              </select>
            </div>
            <a href="<?= BASE_PATH?>/index" class="btn btn-secondary">Toate</a>
            <button type="submit" class="btn btn-primary">Filtraza</button>
          </form> 
        </div>
      </div>
      <!-- EOF Filtre -->
    </div>
    <div class="col-lg-8">
      <!-- Messaje -->
      <?php $this->partial('views/alert.phtml')?>
      <!-- Produse -->
      <?php foreach ($this->molds as $mold):?>
      <div class="table-responsive rounded">
        <table class="table table-hover table-bordered table-light">
          <thead class="thead-light">
            <tr>
              <th>Produs</th>
              <th colspan="4"><a href="<?= BASE_PATH?>/edit-mold/<?= $mold['id']?>"><?= $mold['denumire_reper']?></a></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Cod produs</td>
              <td><?= $mold['cod_matrita']?></td>
              <td>&nbsp;</td>
              <td>Kg/mc</td>
              <td>g/buc</td>
            </tr>
            <tr>
              <td>Material</td>
              <td><?= $mold['material']['name']?></td>
            <?php 
            if (isset($this->materials[0])):
              $materialName = $this->materials[0]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Greutate Kg/mc</td>
              <td><?= $mold['greutate']?></td>
            <?php 
              if (isset($this->materials[1])):
                $materialName = $this->materials[1]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Productie 24h</td>
              <td class="bg-warning">1.2</td>
            <?php 
            if (isset($this->materials[2])):
              $materialName = $this->materials[2]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Greutate /buc</td>
              <td><?= $mold['greutate_fara_cule']?></td>
            <?php 
            if (isset($this->materials[3])):
              $materialName = $this->materials[3]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Timp injectie [sec]</td>
              <td><?= $mold['ciclu_inj']?></td>
            <?php 
            if (isset($this->materials[4])):
              $materialName = $this->materials[4]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Masina tip</td>
              <td><?= $mold['cod_reper']?></td>
            <?php 
            if (isset($this->materials[5])):
              $materialName = $this->materials[5]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Buc/mc</td>
              <td><?= $mold['cantitate']?></td>
            <?php 
            if (isset($this->materials[6])):
              $materialName = $this->materials[6]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Nr Matrita</td>
              <td class="bg-warning">&nbsp;</td>
            <?php 
            if (isset($this->materials[7])):
              $materialName = $this->materials[7]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <tr>
              <td>Nr cuiburi/matrita</td>
              <td><?= $mold['nr_cuiburi']?></td>
            <?php 
            if (isset($this->materials[8])):
              $materialName = $this->materials[8]['name']
            ?>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            <?php else:?>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            <?php endif?>
            </tr>
            <?php for ($i = 9; $i < $this->materialsCount; $i++):?>
              <?php $materialName = $this->materials[$i]['name']?>
              <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td><?= $materialName?></td>
              <td><?= $mold['materials'][$materialName]['kgmc']?></td>
              <td><?= $mold['materials'][$materialName]['gbuc']?></td>
            </tr>
            <?php endfor?>
          </tbody>
        </table>
      </div>
      <?php endforeach?>
      <!-- EOF Produse -->
    </div>
    <div class="col-lg-2">&nbsp;</div>
  </div>
</div>